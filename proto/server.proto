syntax = "proto3";
package proto;
message CreateRequest {
  bytes Document = 1;
  string Operation = 2;
  Meta Meta = 3;
}
message ReadRequest {
  bytes Find = 1;
  string Operation = 2;
  ReadOptions Options = 3;
  Meta Meta = 4;
}
message ReadOptions {
  map<string,int32> Select = 1;
  map<string,int32> Sort = 2;
  int64 Skip = 3;
  int64 Limit = 4;
  string Distinct = 5;
}
message UpdateRequest {
  bytes Find = 1;
  string Operation = 2;
  bytes Update = 3;
  Meta Meta = 4;
}
message DeleteRequest {
  bytes Find = 1;
  string Operation = 2;
  Meta Meta = 3;
}
message AggregateRequest {
  bytes Pipeline = 1;
  string Operation = 2;
  Meta Meta = 3;
}
message Response {
  int32 Status = 1;
  string Error = 2;
  bytes Result = 3;
}
message Meta {
  string Project = 1;
  string DBType = 2;
  string Col = 3;
  string Token = 4;
}

service SpaceCloud {
  rpc Create(CreateRequest) returns (Response) {}
  rpc Read(ReadRequest) returns (Response) {}
  rpc Update(UpdateRequest) returns (Response) {}
  rpc Delete(DeleteRequest) returns (Response) {}
  rpc Aggregate(AggregateRequest) returns (Response) {}
}
